<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin-Home</title>
    <link rel="stylesheet" href="dist/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet">
    <style>
        body {
            display: flex;
            height: 100vh; 
            overflow: hidden; /* Prevent scrolling */
        }
        .sidebar {
            width: 250px; 
            height: 100vh; /* Full height */
            position: fixed; /* Make sidebar fixed */
            top: 0; /* Align to top */
            left: 0; /* Align to left */
            background-color: #343a40; /* Sidebar background color */
            padding-top: 20px; /* Add some padding at the top */
        }
        .main-content {
            margin-left: 250px; /* Space for sidebar */
            flex-grow: 1; 
            overflow-y: auto; /* Allow vertical scrolling in main content */
        }
        nav.navbar {
            z-index: 1000; /* Ensure the header is above other elements */
        }
    </style>
</head>
<body class="bg-black text-white">
    <div class="sidebar">
        <!-- Profile Section -->
        <div class="text-center">
            <img src="assets/images/admin-profile.jpg" class="rounded-circle img-fluid" width="80" height="80">
            <h5 class="mt-2">Amritha</h5>
            <h3 class="mt-1 text-primary">Master Admin</h3>
        </div>
        <hr>
    
        <!-- Sidebar Menu -->
        <ul class="nav nav-pills flex-column mb-auto">
            <li class="nav-item">
                <a id="dashboardLink" href="#" class="nav-link text-white active bg-primary">
                    <i class="bi bi-grid-fill text-me-2"></i> Dashboard
                </a>
            </li>
            <li>
                <a href="usermng.html" class="nav-link text-white">
                    <i class="bi bi-person-fill me-2"></i> User Management
                </a>
            </li>
            <li>
                <a href="planmng.html" class="nav-link text-white">
                    <i class="bi bi-gem me-2"></i> Plan Management
                </a>
            </li>
            <li>
                <a href="staticpage.html" class="nav-link text-white">
                    <i class="bi bi-table me-2"></i> Performance Overview
                </a>
            </li>
        </ul>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <nav class="navbar navbar-expand-lg bg-primary sticky-top">
            <a class="navbar-brand fw-bold text-light fs-4 ms-3" href="adminhome.html">ṃȏɞı-ċȏṃṃ</a>
            <div class="ml-auto ms-auto me-4">
                <img src="assets/images/admin-profile.jpg" class="rounded-circle" width="40" height="40">
            </div>
        </nav>
        <!-- Dashboard Title Container -->
        <div class="container-fluid-expland-lg">
            <div class="bg-secondary text-white p-3 mb-4">
                <h3 class="text-primary">Dashboard</h3>
            </div>
        </div>
        <!-- Page Content -->
        <div class="container-fluid p-4">
            <div class="row">
                <!-- Total Users Card -->
                <div class="col-md-4 mb-4">
                    <div class="card text-center bg-dark text-white">
                        <div class="card-body">
                            <i class="bi bi-people-fill display-4 text-warning"></i>
                            <h4 class="card-title fw-bold mt-2">2500</h4>
                            <p class="card-text">Total Users</p>
                        </div>
                    </div>
                </div>

                <!-- Total Plans Card -->
                <div class="col-md-4 mb-4">
                    <div class="card text-center bg-dark text-white">
                        <div class="card-body">
                            <i class="bi bi-lightning-charge-fill text-warning display-4"></i>
                            <h4 class="card-title fw-bold mt-2">200</h4>
                            <p class="card-text">Total Plans</p>
                        </div>
                    </div>
                </div>

                <!-- Total Recharge Card -->
                <div class="col-md-4 mb-4">
                    <div class="card text-center bg-dark text-white">
                        <div class="card-body">
                            <i class="bi bi-check-circle-fill text-warning display-4"></i>
                            <h4 class="card-title fw-bold mt-2">200</h4>
                            <p class="card-text">Total Plans</p>
                        </div>
                    </div>
                </div>

                <!-- Total Enquiries Card -->
                <div class="col-md-4 mb-4">
                    <div class="card text-center bg-dark text-white">
                        <div class="card-body">
                            <i class="bi bi-question-circle-fill text-warning display-4"></i>
                            <h4 class="card-title fw-bold mt-2">500+</h4>
                            <p class="card-text">Total Enquiries</p>
                        </div>
                    </div>
                </div>

                <!-- Total Revenue Card -->
                <div class="col-md-4 mb-4">
                    <div class="card text-center bg-dark text-white">
                        <div class="card-body">
                            <i class="bi bi-currency-exchange text-warning display-4"></i>
                            <h4 class="card-title fw-bold mt-2">$50,000</h4>
                            <p class="card-text">Total Revenue</p>
                        </div>
                    </div>
                </div>

                <!-- Active Subscriptions Card -->
                <div class="col-md-4 mb-4">
                    <div class="card text-center bg-dark text-white">
                        <div class="card-body">
                            <i class="bi bi-shield-lock text-warning display-4"></i>
                            <h4 class="card-title fw-bold mt-2">1,800</h4>
                            <p class="card-text">Active Subscriptions</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="container-fluid p-4">
            <h4 class="text-primary ms-4 pb-3">Users With Expiring Plans</h4>
            <div class="table-responsive rounded-4">
                <table class="table table-striped table-dark">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Mobile</th>
                            <th>Expiry Date</th>
                            <th>View Recharge</th>
                        </tr>
                    </thead>
                    <tbody id="subscriberTable"></tbody>
                </table>
            </div>
        </div>
    </div>  
       <!-- Recharge History Modal -->
<div class="modal fade" id="historyModal" tabindex="-1" role="dialog" aria-labelledby="historyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document"> <!-- Added modal-dialog-centered -->
        <div class="modal-content bg-secondary text-white"> <!-- Set bg-secondary and text color -->
            <div class="modal-header">
                <h5 class="modal-title text-primary fw-bold" id="historyModalLabel">Recharge History</h5>
                <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button> <!-- Updated close button -->
            </div>
            <div class="modal-body">
                <table class="table table-striped table-dark">
                    <thead>
                        <tr>
                            <th>Plan Name</th>
                            <th>Date</th>
                            <th>Payment Mode</th>
                            <th>Validity</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>   
                  const userData = [
            {
                id: 1,
                name: 'Amritha',
                mobile: '1234567890',
                expiryDate: '2025-03-01',
                rechargeHistory: [
                    { planName: 'Basic Plan', date: '2023-01-15', paymentMode: 'Credit Card', validity: '1 Month' },
                    { planName: 'Premium Plan', date: '2023-02-15', paymentMode: 'Debit Card', validity: '3 Months' },
                ],
            },
            {
                id: 2,
                name: 'Nandakumar',
                mobile: '0987654321',
                expiryDate: '2025-02-28',
                rechargeHistory: [
                    { planName: 'Standard Plan', date: '2023-02-10', paymentMode: 'Net Banking', validity: '6 Months' },
                ],
            },
            {
                id: 3,
                name: 'Deepak',
                mobile: '0987654321',
                expiryDate: '2025-02-28',
                rechargeHistory: [
                    { planName: 'Standard Plan', date: '2023-02-10', paymentMode: 'UPI', validity: '3 Months' },
                ],
            },
        ];

        // Function to populate the subscriber table
        function populateSubscriberTable() {
            const tableBody = document.getElementById('subscriberTable');
            userData.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.mobile}</td>
                    <td>${user.expiryDate}</td>
                    <td><button class="btn btn-primary view-history" data-id="${user.id}">View</button></td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Function to populate the recharge history modal
        function populateHistoryModal(userId) {
            const historyTableBody = document.getElementById('historyTableBody');
            historyTableBody.innerHTML = ''; // Clear existing data
            const user = userData.find(u => u.id === userId);
            if (user && user.rechargeHistory) {
                user.rechargeHistory.forEach(history => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${history.planName}</td>
                        <td>${history.date}</td>
                        <td>${history.paymentMode}</td>
                        <td>${history.validity}</td>
                    `;
                    historyTableBody.appendChild(row);
                });
            }
        }

        // Event listener for view history buttons
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('view-history')) {
                const userId = parseInt(e.target.getAttribute('data-id'));
                populateHistoryModal(userId);
                $('#historyModal').modal('show'); // Show the modal
            }
        });

        // Initialize the subscriber table on page load
        window.onload = populateSubscriberTable;

    </script>    
</body>
</html>
